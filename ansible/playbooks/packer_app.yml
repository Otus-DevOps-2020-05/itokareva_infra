---
- name: Install ruby & bundler
  hosts: all
  become: true
  tasks:
  - name: Update and upgrade apt packages
    become: true
    apt: upgrade=yes update_cache=yes cache_valid_time=86400
  - name: Install ruby and dependencies
    become: true
    apt: name="{{ item }}" state=present update_cache=yes
    loop: "{{  ['ruby-full', 'ruby-bundler', 'build-essential']  }}"
#    with_items:
#    - ruby-full
#    - ruby-bundler
#    - build-essential
#    apt: name=['ruby-full', 'ruby-bundler', 'build-essential']
#    - name: non-optimal yum, slower and may cause issues with interdependencies
#  yum:
#    name: "{{  item  }}"
#    state: present
#  loop: "{{  list_of_packages  }}"
